<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Drawing Match</title>
        
        <!-- jsPsych -->
        <script src="https://unpkg.com/jspsych@7.3.4"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-image-button-response@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-browser-check@1.0.3"></script>

        <!-- jsPsych CSS -->
        <link href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css" rel="stylesheet" type="text/css" />
        <!-- DataPipe for OSF -->
        <script src="https://pipe.jspsych.org/dist/datapipe.js"></script>
        
        <style>
            /* Custom styles for the drawing matching experiment */
            body {
                background-color: #f5f5f5;
                font-family: Arial, sans-serif;
            }

            #jspsych-content {
                max-width: 1200px;
                margin: auto;
            }

            .jspsych-btn {
                margin: 10px;
                padding: 0;
                border: 3px solid #ddd;
                background-color: white;
                cursor: pointer;
                transition: border-color 0.3s;
            }

            .jspsych-btn:hover {
                border-color: #2196F3;
            }

            .jspsych-btn img {
                display: block;
            }
        </style>

        <script>
            // config

            const OSF_CONFIG = {
                experimentID: 'TODO', // TODO
                filename: null, // dynamic
                dataType: 'json'
            };

            const EXPERIMENT_PARAMS = {
                n_trials: 60, // # trials per participant
                n_attention_checks: 3, // # attention check trials
                trial_timeout: 1800000, // 30 minutes (ms)
                min_rt_treshold: 500, // minimum RT for valid trials
                image_size: [380, 380] // for reference, the actual sizes are set directly in trial creation
            }

            const CATEGORIES = [
                'amusement_park',
                'badlands',
                'bathroom',
                'bedroom',
                'dining_room',
                'farm',
                'fountain',
                'garden',
                'house',
                'kitchen',
                'lighthouse',
                'living_room',
                'mountain',
                'playground',
                'pool',
                'street',
                'tower'
            ];

            const COMPLETION_CODE = 'TODO' // TODO
        
        // stimulus
        
        function generateDrawingStimuli() {
            const stimuli = [];
            // TODO: MANUALLY LOAD ALL THE IMAGES OR GET THEM AUTOMATICALLY?
            CATEGORIES.forEach(category => {
                // 2 delayed recall drawings per category
                ['high', 'low'].forEach(memorability => {
                    stimuli.push({
                        drawing: ``,
                        condition: 'delayed_recall',
                        category: category,
                        target_image: ``,
                        memorability: memorability,
                        high_image: `../data/stim/${category}_high.jpg`,
                        low_image: `../data/stim/${category}_high.jpg`,
                        foil_image: `../data/stim/${category}_high.jpg`
                    });
                });
            
                // 2 category drawings per category
                [1, 2].forEach(num => {
                    stimuli.push({
                        drawing: ``,
                        condition: 'category',
                        category: category,
                        target_image: null,  // no predetermined target for category drawings
                        memorability: null,
                        high_image: `../data/stim/${category}_high.jpg`,
                        low_image: `../data/stim/${category}_low.jpg`,
                        foil_image: `../data/stim/${category}_foil.jpg`
                    });
                });
            });

            return stimuli;

        }

        
        
        
        
        
        
        
        </script>


</html>